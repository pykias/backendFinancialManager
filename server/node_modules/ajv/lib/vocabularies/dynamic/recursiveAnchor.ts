import type {CodeKeywordDefinition} from "ajv/lib/types"
import {dynamicAnchor} from "ajv/lib/vocabularies/dynamic/dynamicAnchor"
import {checkStrictMode} from "ajv/lib/compile/util"

const def: CodeKeywordDefinition = {
  keyword: "$recursiveAnchor",
  schemaType: "boolean",
  code(cxt) {
    if (cxt.schema) dynamicAnchor(cxt, "")
    else checkStrictMode(cxt.it, "$recursiveAnchor: false is ignored")
  },
}

export default def
